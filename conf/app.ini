#-----------------------------------------
# application
#
[app]

# debug
debug = false

# reload
reloadable = false

# secret key
secret = ~ pangox-xdemo ~

# external message path
messages = 

# external template path
templates = 

# external web assets path
webassets = 

# locales
locales = en ja zh

# temporary file expire time (default: 2h)
tempfileExpires = 


#-----------------------------------------
# server
#
[server]

# listen (non reloadable)
listen = :6060

# certificate file or "autocert" (automatic access to certificates from Let's Encrypt and any other ACME-based CA)
certificate = autocert
#certificate = ./conf/xdemo.cer

# certificate key file
certkeyfile = ./conf/xdemo.key

# autocert cache directory
autocertcache = ./cert

# autocert host list (space separated) (blank: means any host)
autocerthosts = 

# domain
domain = aska-soft.com

# context path (non reloadable)
prefix = 

# max connections (default: 0 - unlimit)
maxConnections = 1024

# http read header timeout (default: 10s)
httpReadHeaderTimeout =

# http read timeout (default: 120s)
httpReadTimeout = 

# http write timeout (default: 300s)
httpWriteTimeout = 

# http idle timeout (default: 30s)
httpIdleTimeout = 0s

# http server shutdown timeout (default: 15s)
shutdownTimeout = 

# tcp dump
tcpDump = false

# http dump
httpDump = false

# http gzip
httpGzip = true

# http max request body size (default: 8MB)
httpMaxRequestBodySize = 8MB

# http drain request body (default: false, set to true if behind a apache proxy)
httpDrainRequestBody = false

# http trusted proxies (default: intranet cidrs)
httpTrustedProxies =

# http trusted IP Header
httpTrustedIPHeader =

# http remote IP Headers (default: X-Forwarded-For X-Real-Ip)
httpRemoteIPHeaders = 

# http SSL Proxy Headers (default: X-Forwarded-Proto:https)
httpSSLProxyHeaders =

# http response header
httpResponseHeader = {\
	"X-Frame-Options": "SAMEORIGIN", \
	"X-Content-Type-Options": "nosniff", \
	"Strict-Transport-Security": "max-age=31536000; includeSubdomains", \
	"Server": "xdemo-{{VERSION}}.{{REVISION}}" \
}

# https redirect
httpsRedirect = true

# Access-Control-Allow-Origin (space separate)
accessControlAllowOrigin = *

# Access-Control-Allow-Credentials (default: false - unset)
accessControlAllowCredentials = 

# Access-Control-Allow-Headers
accessControlAllowHeaders = Authorization, x-csrf-token

# Access-Control-Allow-Methods (default: '' - unset)
accessControlAllowMethods = 

# Access-Control-Expose-Headers (default: '' - unset)
accessControlExposeHeaders = 

# Access-Control-MaxAge (default: 0 - unset)
accessControlMaxAge = 

# static cache control
staticCacheControl = public, max-age=31536000, immutable

# access log
accessLog = text json

# access log text format
accessLogTextFormat = "text:%t\t%S\t%D\t%B\t%c\t%r\t%m\t%s://%h%u\t%h{User-Agent}%n"

# access log json format
accessLogJSONFormat = json:{"time": %t, "server": %H, "status": %S, "latency": %T, "size": %B, "client_ip": %c, "remote_addr": %r, "method": %m, "scheme": %s, "host": %h, "url": %u, "user_agent": %h{User-Agent}}%n


#-----------------------------------------
# database
#
[database]

# driver (mysql, pgx)
driver = pgx

# source (mysql)
#source = "xdemo:xdemo@tcp(127.0.0.1:3306)/xdemo?charset=utf8mb4&parseTime=True&loc=Local"

# source (postgres)
source = "host=127.0.0.1 user=xdemo password=xdemo dbname=xdemo port=5432 sslmode=disable"

# the maximum number of connections in the idle connection pool.
maxIdleConns = 5

# the maximum amount of time a connection may be idle.
connMaxIdleTime = 5m

# the maximum number of open connections to the database.
maxOpenConns = 10

# maximum amount of time a connection may be reused.
connMaxLifetime = 10m

# slow sql log threshold
slowSQL = 2s

# schema (default: public)
schema = public


#-----------------------------------------
# tenant
#
[tenant]

# multiple tenant
multiple = false


#-----------------------------------------
# cache
#
[cache]

# schema cache expire time (default: 1m)
schemaCacheExpires = 

# settings cache expire time (default: 1m)
settingsCacheExpires = 

# worker cache expire time (default: 1m)
workerCacheExpires = 

# user cache expire time (default: 1m)
userCacheExpires = 

# authencate failure ip cache expire time (default: 30m)
afipCacheExpires = 


#-----------------------------------------
# saml
#
[saml]

# certificate file
certificate = ./conf/xdemo.saml.cer

# certificate key file
certkeyfile = ./conf/xdemo.saml.key


#-----------------------------------------
# smtp
#
[smtp]

host = 
port = 
timeout = 
insecure = 
username = 
password = 
fromaddr = 


#-----------------------------------------
# task
#
[task]

# job schedule cron
jobSchedule = 0/10 * * * *

# job start cron
jobStart = 3/10 * * * *

# job reappend cron
jobReappend = 6/10 * * * *

# job clean cron
jobClean = 5 1 * * *

# temporary files clean cron
tmpClean = 0 * * * *

# database clean cron
dataClean = 15 1 * * *

# db vacuum cron
dbVacuum = 0 6 * * 0


#-----------------------------------------
# job
#
[job]

# start jobs at startup (default: false)
startAtStartup = true

# max total running jobs
maxTotalRunnings = 50

# max tenant running jobs
maxTenantRunnings = 5

# reappend RUNNING jobs that not updated before this duration
reappendBefore = 30m

# clean outdated COMPLETE or ABORTED jobs (jobchains) before this duration
outdatedBefore = 240h

# max job list
maxJobList = 100

# max job logs fetch limit
maxJobLogsFetch = 10000

# max job chain list
maxJobChainList = 100

# job check interval (default: 1s)
jobCheckInterval = 

# job pin interval (default: 1m)
jobPinInterval = 


#-----------------------------------------
# server stats monitor
#
[monitor]

# interval (0: disable)
interval = 1m

# disk free threshold (average for diskCount, default: 1GB)
diskFree = 1GB

# disk usage count (default: 5)
diskCount = 5

# cpu usage threshold (average for cpuCount, default: 0.9)
cpuUsage = 0.9

# cpu usage count (default: 5)
cpuCount = 5

# memory usage threshold (average for memCount, default: 0.9)
memUsage = 0.9

# mem usage count (default: 5)
memCount = 5


#-----------------------------------------
# default super account setting
#
[super]
email = xdemo.pango@gmail.com
password = changeme
loginmfa = E
cidr = "0.0.0.0/0\n::/0"


#-----------------------------------------
# login setting
#
[login]

# cookie max age (default: 30m)
cookieMaxAge =

# cookie secure (https, default: true)
cookieSecure =

# cookie same site (default: strict)
cookieSameSite = lax

# max login failure count per IP (default: 5)
maxFailure =

# password reset token expire time (default: 10m)
passwordResetTokenExpires =

# mfa email password expire time (default: 10m)
emailPasscodeExpires = 

# mfa mobile password expire time (default: 30s)
mobilePasscodeExpires = 

