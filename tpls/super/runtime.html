{{MapSet .Ctx.Attrs "astyles" (Array "super/runtime.css")}}

{{template "main_header" .}}

{{define "runcards"}}
	{{range $e := .Entries}}
	<div class="card">
		<div class="card-header">{{$e.Key}}</div>
		<div class="card-body">{{$e.Val}}</div>
	</div>
	{{end}}
{{end}}

<div class="s-section">
	<div class="s-section-head">
		<h2>{{I "super.runtime"}}<span>{{T .Loc "menu.super.runtime"}}</span></h2>
		<div class="ms-auto"></div>
		<a class="btn btn-sm btn-outline-primary" href="../">{{I "super"}} {{T .Loc "menu.super"}}</a>
	</div>
	<div class="s-section-body runtime">
		<h3><i class="fab fa-fw fa-golang"></i> Process</h3>
		<div class="d-flex flex-row flex-wrap gap-3 p-2 mb-4 process">
			{{template "runcards" .Process}}
		</div>

		<h3><i class="fas fa-fw fa-memory"></i> Memory</h3>
		<div class="d-flex flex-row flex-wrap gap-3 p-2 mb-4 memory">
			{{template "runcards" .MemStats}}
		</div>

		<h3><i class="fas fa-fw fa-bugs"></i> Profiles</h3>
		<div class="d-flex flex-row flex-wrap gap-3 p-2 mb-4 profiles">
			{{range $p := .Profiles}}
			<div class="card">
				<div class="card-header">({{$p.Count}}) <a href="./pprof/{{$p.Name}}?debug=1">{{$p.Name}}</a>
					<a href="./pprof/{{$p.Name}}">{{I "dnload"}}</a>
					{{if eq $p.Name "goroutine"}}
					<a class="float-end" href="./pprof/{{$p.Name}}?debug=2">debug=2</a>
					{{end}}
					{{if eq $p.Name "heap"}}
					<span class="float-end">
						<a href="./pprof/{{$p.Name}}?debug=1&GC=1">GC=1</a>
						<a href="./pprof/{{$p.Name}}?GC=1">{{I "dnload"}}</a>
					</span>
					{{end}}
				</div>
				<div class="card-body">{{$p.Desc}}</div>
			</div>
			{{end}}
		</div>

		<h3><i class="fas fa-fw fa-gears"></i> Trace</h3>
		<div class="d-flex flex-row flex-wrap gap-3 p-2 mb-4 trace">
			{{range $t := .Traces}}
			<div class="card">
				<div class="card-header"><a href="./pprof/{{$t.Name}}">{{$t.Name}}</a></div>
				<div class="card-body">{{$t.Desc}}</div>
			</div>
			{{end}}
		</div>
	</div>
</div>

{{template "main_footer" .}}